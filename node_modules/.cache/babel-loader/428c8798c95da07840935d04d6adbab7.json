{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MihaiPopa\\\\WebstormProjects\\\\video-player-application\\\\src\\\\components\\\\VideoPlayer.js\";\nimport React, { useRef, useEffect, useCallback, useState } from 'react';\nimport shaka from 'shaka-player/dist/shaka-player.compiled.js';\nimport Hls from 'hls.js';\nimport ProgressBar from './ProgressBar';\nimport SkipButtons from './SkipButtons';\nconst VideoPlayer = () => {\n  const videoRef = useRef(null);\n  const playerRef = useRef(null);\n  const hlsRef = useRef(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const onError = useCallback(error => {\n    console.error('Error code', error.code, 'object', error);\n  }, []);\n  const onErrorEvent = useCallback(event => {\n    onError(event.detail);\n  }, [onError]);\n  useEffect(() => {\n    const initializePlayer = async () => {\n      shaka.polyfill.installAll();\n      if (!shaka.Player.isBrowserSupported()) {\n        console.error('Browser does not support Shaka Player');\n        return;\n      }\n      if (Hls.isSupported()) {\n        const hls = new Hls();\n        hls.loadSource('https://d3ukqbhrqb4xnt.cloudfront.net/share_videos/6e95f9a732a74664a4982adf4b808500/e8ffab99-e494-495d-8b21-787e95f9672d/211115200114.m3u8');\n        hls.attachMedia(videoRef.current);\n        hls.on(Hls.Events.MANIFEST_PARSED, () => {\n          setIsPlaying(true);\n          setIsLoading(false);\n          videoRef.current.play();\n        });\n        const player = hls;\n        playerRef.current = player;\n      } else {\n        const player = new shaka.Player(videoRef.current);\n        playerRef.current = player;\n\n        // Attach error event listener\n        player.addEventListener('error', onErrorEvent);\n\n        // Configure adaptive streaming\n        player.configure({\n          abr: {\n            defaultBandwidthEstimate: 500000 // Example: 500 Kbps\n          }\n        });\n\n        const manifestUrl = 'https://d3ukqbhrqb4xnt.cloudfront.net/share_videos/6e95f9a732a74664a4982adf4b808500/e8ffab99-e494-495d-8b21-787e95f9672d/211115200114.m3u8';\n        try {\n          await player.load(manifestUrl);\n          console.log('The video has now been loaded!');\n          setIsLoading(false);\n          setIsPlaying(true); // Autoplay the video\n          videoRef.current.play();\n        } catch (error) {\n          onError(error);\n        }\n      }\n    };\n    initializePlayer();\n    return () => {\n      if (playerRef.current) {\n        // Clean up the player and event listeners\n        playerRef.current.removeEventListener('error', onErrorEvent);\n        playerRef.current.destroy();\n      }\n    };\n  }, [onErrorEvent, onError]);\n  const handleVideoPlay = useCallback(() => {\n    setIsPlaying(true);\n    videoRef.current.play();\n  }, []);\n  const handleVideoPause = useCallback(() => {\n    setIsPlaying(false);\n    videoRef.current.pause();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    className: \"shaka-video\",\n    ref: videoRef,\n    onClick: isPlaying ? handleVideoPause : handleVideoPlay,\n    muted: isPlaying,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"controls-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 4\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 6\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ProgressBar, {\n    videoRef: videoRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(SkipButtons, {\n    videoRef: videoRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }))));\n};\nexport default VideoPlayer;","map":{"version":3,"names":["React","useRef","useEffect","useCallback","useState","shaka","Hls","ProgressBar","SkipButtons","VideoPlayer","videoRef","playerRef","hlsRef","isPlaying","setIsPlaying","isLoading","setIsLoading","onError","error","console","code","onErrorEvent","event","detail","initializePlayer","polyfill","installAll","Player","isBrowserSupported","isSupported","hls","loadSource","attachMedia","current","on","Events","MANIFEST_PARSED","play","player","addEventListener","configure","abr","defaultBandwidthEstimate","manifestUrl","load","log","removeEventListener","destroy","handleVideoPlay","handleVideoPause","pause","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ref","onClick","muted","Fragment"],"sources":["C:/Users/MihaiPopa/WebstormProjects/video-player-application/src/components/VideoPlayer.js"],"sourcesContent":["import React, { useRef, useEffect, useCallback, useState } from 'react';\nimport shaka from 'shaka-player/dist/shaka-player.compiled.js';\nimport Hls from 'hls.js';\nimport ProgressBar from './ProgressBar';\nimport SkipButtons from './SkipButtons';\n\nconst VideoPlayer = () => {\n\tconst videoRef = useRef(null);\n\tconst playerRef = useRef(null);\n    const hlsRef = useRef(null);\n\n\tconst [isPlaying, setIsPlaying] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tconst onError = useCallback((error) => {\n\t\tconsole.error('Error code', error.code, 'object', error);\n\t}, []);\n\n\tconst onErrorEvent = useCallback(\n\t\t(event) => {\n\t\t\tonError(event.detail);\n\t\t},\n\t\t[onError]\n\t);\n\n\tuseEffect(() => {\n\t\tconst initializePlayer = async () => {\n\t\t\tshaka.polyfill.installAll();\n\t\t\tif (!shaka.Player.isBrowserSupported()) {\n\t\t\t\tconsole.error('Browser does not support Shaka Player');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (Hls.isSupported()) {\n\t\t\t\tconst hls = new Hls();\n\t\t\t\thls.loadSource('https://d3ukqbhrqb4xnt.cloudfront.net/share_videos/6e95f9a732a74664a4982adf4b808500/e8ffab99-e494-495d-8b21-787e95f9672d/211115200114.m3u8');\n\t\t\t\thls.attachMedia(videoRef.current);\n\t\t\t\thls.on(Hls.Events.MANIFEST_PARSED, () => {\n\t\t\t\t\tsetIsPlaying(true);\n\t\t\t\t\tsetIsLoading(false);\n\n\t\t\t\t\tvideoRef.current.play();\n\t\t\t\t});\n\t\t\t\tconst player = hls;\n\t\t\t\tplayerRef.current = player;\n\n\t\t\t} else {\n\t\t\t\tconst player = new shaka.Player(videoRef.current);\n\t\t\t\tplayerRef.current = player;\n\n\t\t\t\t// Attach error event listener\n\t\t\t\tplayer.addEventListener('error', onErrorEvent);\n\n\t\t\t\t// Configure adaptive streaming\n\t\t\t\tplayer.configure({\n\t\t\t\t\tabr: {\n\t\t\t\t\t\tdefaultBandwidthEstimate: 500000, // Example: 500 Kbps\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tconst manifestUrl =\n\t\t\t\t\t'https://d3ukqbhrqb4xnt.cloudfront.net/share_videos/6e95f9a732a74664a4982adf4b808500/e8ffab99-e494-495d-8b21-787e95f9672d/211115200114.m3u8';\n\n\t\t\t\ttry {\n\t\t\t\t\tawait player.load(manifestUrl);\n\t\t\t\t\tconsole.log('The video has now been loaded!');\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\tsetIsPlaying(true); // Autoplay the video\n\t\t\t\t\tvideoRef.current.play();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tonError(error);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tinitializePlayer();\n\n\t\treturn () => {\n\t\t\tif (playerRef.current) {\n\t\t\t\t// Clean up the player and event listeners\n\t\t\t\tplayerRef.current.removeEventListener('error', onErrorEvent);\n\t\t\t\tplayerRef.current.destroy();\n\t\t\t}\n\t\t};\n\t}, [onErrorEvent, onError]);\n\n\tconst handleVideoPlay = useCallback(() => {\n\t\tsetIsPlaying(true);\n\t\tvideoRef.current.play();\n\t}, []);\n\n\tconst handleVideoPause = useCallback(() => {\n\t\tsetIsPlaying(false);\n\t\tvideoRef.current.pause();\n\t}, []);\n\n\treturn (\n\t\t<div className=\"video-container\">\n\t\t\t<video\n\t\t\t\tclassName=\"shaka-video\"\n\t\t\t\tref={videoRef}\n\t\t\t\tonClick={isPlaying ? handleVideoPause : handleVideoPlay}\n\t\t\t\tmuted={isPlaying}\n\t\t\t/>\n\t\t\t<div className=\"controls-container\">\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<div>Loading...</div>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<ProgressBar videoRef={videoRef} />\n\t\t\t\t\t\t<SkipButtons videoRef={videoRef} />\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default VideoPlayer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}