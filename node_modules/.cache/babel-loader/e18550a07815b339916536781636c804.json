{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MihaiPopa\\\\WebstormProjects\\\\video-player-application\\\\src\\\\components\\\\VideoPlayer.js\";\nimport React, { useRef, useEffect, useCallback, useState } from 'react';\nimport shaka from 'shaka-player/dist/shaka-player.compiled.js';\nimport Hls from 'hls.js';\nimport ProgressBar from './ProgressBar';\nimport SkipButtons from './SkipButtons';\nconst VideoPlayer = () => {\n  const videoRef = useRef(null);\n  const playerRef = useRef(null);\n  const hlsRef = useRef(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const onError = useCallback(error => {\n    console.error('Error code', error.code, 'object', error);\n  }, []);\n  const onErrorEvent = useCallback(event => {\n    onError(event.detail);\n  }, [onError]);\n  useEffect(() => {\n    const initializePlayer = async () => {\n      shaka.polyfill.installAll();\n      if (!shaka.Player.isBrowserSupported()) {\n        console.error('Browser does not support Shaka Player');\n        return;\n      }\n      const player = new shaka.Player(videoRef.current);\n      playerRef.current = player;\n\n      // Attach error event listener\n      player.addEventListener('error', onErrorEvent);\n\n      // Configure adaptive streaming\n      player.configure({\n        abr: {\n          defaultBandwidthEstimate: 500000 // Example: 500 Kbps\n        }\n      });\n\n      const manifestUrl = 'https://d3ukqbhrqb4xnt.cloudfront.net/share_videos/6e95f9a732a74664a4982adf4b808500/e8ffab99-e494-495d-8b21-787e95f9672d/211115200114.m3u8';\n      try {\n        await player.load(manifestUrl);\n        console.log('The video has now been loaded!');\n        setIsLoading(false);\n        setIsPlaying(true); // Autoplay the video\n        videoRef.current.play();\n      } catch (error) {\n        onError(error);\n      }\n    };\n    initializePlayer();\n    return () => {\n      if (playerRef.current) {\n        // Clean up the player and event listeners\n        playerRef.current.removeEventListener('error', onErrorEvent);\n        playerRef.current.destroy();\n      }\n    };\n  }, [onErrorEvent, onError]);\n  const handleVideoPlay = useCallback(() => {\n    setIsPlaying(true);\n    videoRef.current.play();\n  }, []);\n  const handleVideoPause = useCallback(() => {\n    setIsPlaying(false);\n    videoRef.current.pause();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    className: \"shaka-video\",\n    ref: videoRef,\n    onClick: isPlaying ? handleVideoPause : handleVideoPlay,\n    muted: isPlaying,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"controls-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 4\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 6\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ProgressBar, {\n    videoRef: videoRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(SkipButtons, {\n    videoRef: videoRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }))));\n};\nexport default VideoPlayer;","map":{"version":3,"names":["React","useRef","useEffect","useCallback","useState","shaka","Hls","ProgressBar","SkipButtons","VideoPlayer","videoRef","playerRef","hlsRef","isPlaying","setIsPlaying","isLoading","setIsLoading","onError","error","console","code","onErrorEvent","event","detail","initializePlayer","polyfill","installAll","Player","isBrowserSupported","player","current","addEventListener","configure","abr","defaultBandwidthEstimate","manifestUrl","load","log","play","removeEventListener","destroy","handleVideoPlay","handleVideoPause","pause","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ref","onClick","muted","Fragment"],"sources":["C:/Users/MihaiPopa/WebstormProjects/video-player-application/src/components/VideoPlayer.js"],"sourcesContent":["import React, { useRef, useEffect, useCallback, useState } from 'react';\nimport shaka from 'shaka-player/dist/shaka-player.compiled.js';\nimport Hls from 'hls.js';\nimport ProgressBar from './ProgressBar';\nimport SkipButtons from './SkipButtons';\n\nconst VideoPlayer = () => {\n\tconst videoRef = useRef(null);\n\tconst playerRef = useRef(null);\n    const hlsRef = useRef(null);\n\t\n\tconst [isPlaying, setIsPlaying] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tconst onError = useCallback((error) => {\n\t\tconsole.error('Error code', error.code, 'object', error);\n\t}, []);\n\n\tconst onErrorEvent = useCallback(\n\t\t(event) => {\n\t\t\tonError(event.detail);\n\t\t},\n\t\t[onError]\n\t);\n\n\tuseEffect(() => {\n\t\tconst initializePlayer = async () => {\n\t\t\tshaka.polyfill.installAll();\n\t\t\tif (!shaka.Player.isBrowserSupported()) {\n\t\t\t\tconsole.error('Browser does not support Shaka Player');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst player = new shaka.Player(videoRef.current);\n\t\t\tplayerRef.current = player;\n\n\t\t\t// Attach error event listener\n\t\t\tplayer.addEventListener('error', onErrorEvent);\n\n\t\t\t// Configure adaptive streaming\n\t\t\tplayer.configure({\n\t\t\t\tabr: {\n\t\t\t\t\tdefaultBandwidthEstimate: 500000, // Example: 500 Kbps\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tconst manifestUrl =\n\t\t\t\t'https://d3ukqbhrqb4xnt.cloudfront.net/share_videos/6e95f9a732a74664a4982adf4b808500/e8ffab99-e494-495d-8b21-787e95f9672d/211115200114.m3u8';\n\n\t\t\ttry {\n\t\t\t\tawait player.load(manifestUrl);\n\t\t\t\tconsole.log('The video has now been loaded!');\n\t\t\t\tsetIsLoading(false);\n\t\t\t\tsetIsPlaying(true); // Autoplay the video\n\t\t\t\tvideoRef.current.play();\n\t\t\t} catch (error) {\n\t\t\t\tonError(error);\n\t\t\t}\n\t\t};\n\n\t\tinitializePlayer();\n\n\t\treturn () => {\n\t\t\tif (playerRef.current) {\n\t\t\t\t// Clean up the player and event listeners\n\t\t\t\tplayerRef.current.removeEventListener('error', onErrorEvent);\n\t\t\t\tplayerRef.current.destroy();\n\t\t\t}\n\t\t};\n\t}, [onErrorEvent, onError]);\n\n\tconst handleVideoPlay = useCallback(() => {\n\t\tsetIsPlaying(true);\n\t\tvideoRef.current.play();\n\t}, []);\n\n\tconst handleVideoPause = useCallback(() => {\n\t\tsetIsPlaying(false);\n\t\tvideoRef.current.pause();\n\t}, []);\n\n\treturn (\n\t\t<div className=\"video-container\">\n\t\t\t<video\n\t\t\t\tclassName=\"shaka-video\"\n\t\t\t\tref={videoRef}\n\t\t\t\tonClick={isPlaying ? handleVideoPause : handleVideoPlay}\n\t\t\t\tmuted={isPlaying}\n\t\t\t/>\n\t\t\t<div className=\"controls-container\">\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<div>Loading...</div>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<ProgressBar videoRef={videoRef} />\n\t\t\t\t\t\t<SkipButtons videoRef={videoRef} />\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default VideoPlayer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}