{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MihaiPopa\\\\WebstormProjects\\\\video-player-application\\\\src\\\\components\\\\VideoPlayer.js\";\nimport React, { useRef, useEffect, useCallback, useState } from 'react';\nimport shaka from 'shaka-player/dist/shaka-player.ui.js';\nimport ProgressBar from './ProgressBar';\nimport SkipButtons from './SkipButtons';\nconst VideoPlayer = () => {\n  const videoRef = useRef(null);\n  const playerRef = useRef(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const onError = useCallback(error => {\n    console.error('Error code', error.code, 'object', error);\n  }, []);\n  const onErrorEvent = useCallback(event => {\n    onError(event.detail);\n  }, [onError]);\n  useEffect(() => {\n    const initializePlayer = async () => {\n      shaka.polyfill.installAll();\n      if (!shaka.Player.isBrowserSupported()) {\n        console.error('Browser does not support Shaka Player');\n        return;\n      }\n      const player = new shaka.Player(videoRef.current);\n      playerRef.current = player;\n\n      // Attach error event listener\n      player.addEventListener('error', onErrorEvent);\n\n      // Configure adaptive streaming\n      player.configure({\n        abr: {\n          defaultBandwidthEstimate: 500000 // Example: 500 Kbps\n        }\n      });\n\n      const manifestUrl = 'https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd';\n      try {\n        await player.load(manifestUrl);\n        console.log('The video has now been loaded!');\n        setIsLoading(false);\n        setIsPlaying(true); // Autoplay the video\n        videoRef.current.play();\n      } catch (error) {\n        setIsLoading(false);\n        onError(error);\n      }\n    };\n    initializePlayer();\n    return () => {\n      if (playerRef.current) {\n        // Clean up the player and event listeners\n        playerRef.current.removeEventListener('error', onErrorEvent);\n        playerRef.current.destroy();\n      }\n    };\n  }, [onErrorEvent]);\n  const handleVideoPlay = useCallback(() => {\n    if (!isPlaying) {\n      setIsPlaying(true);\n      videoRef.current.play();\n    }\n  }, [isPlaying]);\n  const handleVideoPause = useCallback(() => {\n    if (isPlaying) {\n      setIsPlaying(false);\n      videoRef.current.pause();\n    }\n  }, [isPlaying]);\n  const handleCanPlay = useCallback(() => {\n    setIsLoading(false);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 3\n    }\n  }, isLoading && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 18\n    }\n  }, \"Loading...\"), /*#__PURE__*/React.createElement(\"video\", {\n    className: \"shaka-video\",\n    ref: videoRef,\n    onClick: isPlaying ? handleVideoPause : handleVideoPlay,\n    onCanPlay: handleCanPlay,\n    controls: true // Show native video controls\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"controls-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(ProgressBar, {\n    videoRef: videoRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(SkipButtons, {\n    videoRef: videoRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  })));\n};\nexport default VideoPlayer;","map":{"version":3,"names":["React","useRef","useEffect","useCallback","useState","shaka","ProgressBar","SkipButtons","VideoPlayer","videoRef","playerRef","isPlaying","setIsPlaying","isLoading","setIsLoading","onError","error","console","code","onErrorEvent","event","detail","initializePlayer","polyfill","installAll","Player","isBrowserSupported","player","current","addEventListener","configure","abr","defaultBandwidthEstimate","manifestUrl","load","log","play","removeEventListener","destroy","handleVideoPlay","handleVideoPause","pause","handleCanPlay","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ref","onClick","onCanPlay","controls"],"sources":["C:/Users/MihaiPopa/WebstormProjects/video-player-application/src/components/VideoPlayer.js"],"sourcesContent":["import React, { useRef, useEffect, useCallback, useState } from 'react';\nimport shaka from 'shaka-player/dist/shaka-player.ui.js';\nimport ProgressBar from './ProgressBar';\nimport SkipButtons from './SkipButtons';\n\nconst VideoPlayer = () => {\n\tconst videoRef = useRef(null);\n\tconst playerRef = useRef(null);\n\n\tconst [isPlaying, setIsPlaying] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tconst onError = useCallback((error) => {\n\t\tconsole.error('Error code', error.code, 'object', error);\n\t}, []);\n\n\tconst onErrorEvent = useCallback(\n\t\t(event) => {\n\t\t\tonError(event.detail);\n\t\t},\n\t\t[onError]\n\t);\n\n\tuseEffect(() => {\n\t\tconst initializePlayer = async () => {\n\t\t\tshaka.polyfill.installAll();\n\t\t\tif (!shaka.Player.isBrowserSupported()) {\n\t\t\t\tconsole.error('Browser does not support Shaka Player');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst player = new shaka.Player(videoRef.current);\n\t\t\tplayerRef.current = player;\n\n\t\t\t// Attach error event listener\n\t\t\tplayer.addEventListener('error', onErrorEvent);\n\n\t\t\t// Configure adaptive streaming\n\t\t\tplayer.configure({\n\t\t\t\tabr: {\n\t\t\t\t\tdefaultBandwidthEstimate: 500000, // Example: 500 Kbps\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tconst manifestUrl =\n\t\t\t\t'https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd';\n\n\t\t\ttry {\n\t\t\t\tawait player.load(manifestUrl);\n\t\t\t\tconsole.log('The video has now been loaded!');\n\t\t\t\tsetIsLoading(false);\n\t\t\t\tsetIsPlaying(true); // Autoplay the video\n\t\t\t\tvideoRef.current.play();\n\t\t\t} catch (error) {\n\t\t\t\tsetIsLoading(false);\n\t\t\t\tonError(error);\n\t\t\t}\n\t\t};\n\n\t\tinitializePlayer();\n\n\t\treturn () => {\n\t\t\tif (playerRef.current) {\n\t\t\t\t// Clean up the player and event listeners\n\t\t\t\tplayerRef.current.removeEventListener('error', onErrorEvent);\n\t\t\t\tplayerRef.current.destroy();\n\t\t\t}\n\t\t};\n\t}, [onErrorEvent]);\n\n\tconst handleVideoPlay = useCallback(() => {\n\t\tif (!isPlaying) {\n\t\t\tsetIsPlaying(true);\n\t\t\tvideoRef.current.play();\n\t\t}\n\t}, [isPlaying]);\n\n\tconst handleVideoPause = useCallback(() => {\n\t\tif (isPlaying) {\n\t\t\tsetIsPlaying(false);\n\t\t\tvideoRef.current.pause();\n\t\t}\n\t}, [isPlaying]);\n\n\tconst handleCanPlay = useCallback(() => {\n\t\tsetIsLoading(false);\n\t}, []);\n\n\treturn (\n\t\t<div className=\"video-container\">\n\t\t\t{isLoading && <div>Loading...</div>}\n\t\t\t<video\n\t\t\t\tclassName=\"shaka-video\"\n\t\t\t\tref={videoRef}\n\t\t\t\tonClick={isPlaying ? handleVideoPause : handleVideoPlay}\n\t\t\t\tonCanPlay={handleCanPlay}\n\t\t\t\tcontrols // Show native video controls\n\t\t\t/>\n\t\t\t<div className=\"controls-container\">\n\t\t\t\t<ProgressBar videoRef={videoRef} />\n\t\t\t\t<SkipButtons videoRef={videoRef} />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default VideoPlayer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}