{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MihaiPopa\\\\WebstormProjects\\\\video-player-application\\\\src\\\\components\\\\VideoPlayer.js\";\nimport React, { useRef, useEffect, useCallback, useState } from 'react';\nimport Hls from 'hls.js';\nimport ProgressBar from './ProgressBar';\nimport SkipButtons from './SkipButtons';\nconst VideoPlayer = () => {\n  const videoRef = useRef(null);\n  const playerRef = useRef(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const onError = useCallback(error => {\n    console.error('Error code', error.code, 'object', error);\n  }, []);\n  const onErrorEvent = useCallback(event => {\n    onError(event.detail);\n  }, [onError]);\n  useEffect(() => {\n    const initializePlayer = async () => {\n      const video = videoRef.current;\n      const hls = new Hls();\n      playerRef.current = hls;\n\n      // Attach error event listener\n      hls.on(Hls.Events.ERROR, (event, data) => {\n        onError(data);\n      });\n      const manifestUrl = 'https://d3ukqbhrqb4xnt.cloudfront.net/share_videos/6e95f9a732a74664a4982adf4b808500/e8ffab99-e494-495d-8b21-787e95f9672d/211115200114.m3u8';\n      try {\n        hls.loadSource(manifestUrl);\n        hls.attachMedia(video);\n        hls.on(Hls.Events.MANIFEST_PARSED, () => {\n          console.log('HLS manifest parsed');\n          setIsLoading(false);\n          setIsPlaying(true);\n          video.play(); // Autoplay the video\n        });\n\n        hls.on(Hls.Events.LEVEL_SWITCHING, (event, data) => {\n          console.log('HLS level switched:', data.level);\n          // Perform any actions when the adaptive bitstream changes\n        });\n      } catch (error) {\n        onError(error);\n      }\n    };\n    initializePlayer();\n    return () => {\n      const hls = playerRef.current;\n      if (hls) {\n        hls.destroy();\n      }\n    };\n  }, [onError, onErrorEvent]);\n  const handleVideoPlay = useCallback(() => {\n    setIsPlaying(true);\n    videoRef.current.play();\n  }, []);\n  const handleVideoPause = useCallback(() => {\n    setIsPlaying(false);\n    videoRef.current.pause();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    className: \"hls-video\",\n    ref: videoRef,\n    onClick: isPlaying ? handleVideoPause : handleVideoPlay,\n    muted: isPlaying,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"controls-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 4\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 6\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ProgressBar, {\n    videoRef: videoRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(SkipButtons, {\n    videoRef: videoRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }))));\n};\nexport default VideoPlayer;","map":{"version":3,"names":["React","useRef","useEffect","useCallback","useState","Hls","ProgressBar","SkipButtons","VideoPlayer","videoRef","playerRef","isPlaying","setIsPlaying","isLoading","setIsLoading","onError","error","console","code","onErrorEvent","event","detail","initializePlayer","video","current","hls","on","Events","ERROR","data","manifestUrl","loadSource","attachMedia","MANIFEST_PARSED","log","play","LEVEL_SWITCHING","level","destroy","handleVideoPlay","handleVideoPause","pause","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ref","onClick","muted","Fragment"],"sources":["C:/Users/MihaiPopa/WebstormProjects/video-player-application/src/components/VideoPlayer.js"],"sourcesContent":["import React, { useRef, useEffect, useCallback, useState } from 'react';\nimport Hls from 'hls.js';\nimport ProgressBar from './ProgressBar';\nimport SkipButtons from './SkipButtons';\n\nconst VideoPlayer = () => {\n\tconst videoRef = useRef(null);\n\tconst playerRef = useRef(null);\n\n\tconst [isPlaying, setIsPlaying] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tconst onError = useCallback((error) => {\n\t\tconsole.error('Error code', error.code, 'object', error);\n\t}, []);\n\n\tconst onErrorEvent = useCallback(\n\t\t(event) => {\n\t\t\tonError(event.detail);\n\t\t},\n\t\t[onError]\n\t);\n\n\tuseEffect(() => {\n\t\tconst initializePlayer = async () => {\n\t\t\tconst video = videoRef.current;\n\t\t\tconst hls = new Hls();\n\t\t\tplayerRef.current = hls;\n\n\t\t\t// Attach error event listener\n\t\t\thls.on(Hls.Events.ERROR, (event, data) => {\n\t\t\t\tonError(data);\n\t\t\t});\n\n\t\t\tconst manifestUrl =\n\t\t\t\t'https://d3ukqbhrqb4xnt.cloudfront.net/share_videos/6e95f9a732a74664a4982adf4b808500/e8ffab99-e494-495d-8b21-787e95f9672d/211115200114.m3u8';\n\n\t\t\ttry {\n\t\t\t\thls.loadSource(manifestUrl);\n\t\t\t\thls.attachMedia(video);\n\n\t\t\t\thls.on(Hls.Events.MANIFEST_PARSED, () => {\n\t\t\t\t\tconsole.log('HLS manifest parsed');\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\tsetIsPlaying(true);\n\t\t\t\t\tvideo.play(); // Autoplay the video\n\t\t\t\t});\n\n\t\t\t\thls.on(Hls.Events.LEVEL_SWITCHING, (event, data) => {\n\t\t\t\t\tconsole.log('HLS level switched:', data.level);\n\t\t\t\t\t// Perform any actions when the adaptive bitstream changes\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tonError(error);\n\t\t\t}\n\t\t};\n\n\t\tinitializePlayer();\n\n\t\treturn () => {\n\t\t\tconst hls = playerRef.current;\n\t\t\tif (hls) {\n\t\t\t\thls.destroy();\n\t\t\t}\n\t\t};\n\t}, [onError, onErrorEvent]);\n\n\tconst handleVideoPlay = useCallback(() => {\n\t\tsetIsPlaying(true);\n\t\tvideoRef.current.play();\n\t}, []);\n\n\tconst handleVideoPause = useCallback(() => {\n\t\tsetIsPlaying(false);\n\t\tvideoRef.current.pause();\n\t}, []);\n\n\treturn (\n\t\t<div className=\"video-container\">\n\t\t\t<video\n\t\t\t\tclassName=\"hls-video\"\n\t\t\t\tref={videoRef}\n\t\t\t\tonClick={isPlaying ? handleVideoPause : handleVideoPlay}\n\t\t\t\tmuted={isPlaying}\n\t\t\t/>\n\t\t\t<div className=\"controls-container\">\n\t\t\t\t{isLoading ? (\n\t\t\t\t\t<div>Loading...</div>\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<ProgressBar videoRef={videoRef} />\n\t\t\t\t\t\t<SkipButtons videoRef={videoRef} />\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default VideoPlayer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}